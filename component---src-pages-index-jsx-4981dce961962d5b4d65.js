"use strict";(self.webpackChunkjstro_io=self.webpackChunkjstro_io||[]).push([[279],{825:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var n=r(1467),c=r(640),s=r(1157),a=r(8865),o=r(313),i=r(7883);var l=(0,n.forwardRef)(((e,t)=>{let{piece:r}=e;const c=function(e){const{0:t,1:r}=(0,n.useState)(!1);return(0,n.useEffect)((()=>{new IntersectionObserver((e=>{let[t]=e;return r(t.isIntersecting)}),{rootMargin:"-1px"}).observe(e.current)}),[e]),t}(t),s=`piece-${r}`;return n.createElement(o.A,{className:"Piece"},n.createElement(i.A,{className:"EmbedCard",ref:t,id:s},c&&n.createElement("iframe",{title:"p5.js Sketch",className:"Embed",src:`/sketches/${r}`})))}));const u=function(e){void 0===e&&(e=100);let{0:t,1:r}=(0,n.useState)(null);const c=e=>{t=e,r(t)};return r=>{t&&clearTimeout(t),c(setTimeout((()=>{c(null),r()}),e))}};var f=e=>{let{location:t}=e;const{0:c,1:o}=(0,n.useState)([]),{0:i,1:f}=(0,n.useState)([]);(0,n.useEffect)((()=>{(async()=>{const e=await r.e(748).then(r.t.bind(r,5748,19));o(Array.from(e)),f(Array.from(e).map((()=>(0,n.createRef)())))})()}),[]);const{0:m,1:d}=(0,n.useState)(null),p=()=>{const e=new IntersectionObserver((e=>{const t=e.find((e=>e.isIntersecting));t&&d(t.target.id.substring(6))}),{rootMargin:"-10px"});i.filter((e=>e.current)).forEach((t=>{e.observe(t.current)}))},E=u(10),v=u(100),b=t.hash.substring(1),{0:h,1:w}=(0,n.useState)(null);(0,n.useEffect)((()=>{v((()=>{if(!m)return;const e=new URL(t.href);e.hash=`#${m}`,window.location.replace(e),w(m)}))}),[m]);const S=e=>{var t;return null===(t=document.querySelector(`#piece-${e}`))||void 0===t?void 0:t.scrollIntoView()},g=u(200);(0,n.useEffect)((()=>{g((()=>{b!==h&&(b||S(c[0]),b&&b!==m&&S(b))}))}),[b,m]),(0,n.useEffect)((()=>{b?S(b):p()}),[i]);const k=(0,s.A)();return n.createElement(a.A,{className:"Pieces",id:"pieces",style:{background:k.vars.palette.secondary.main},elevation:24,onScroll:()=>{E((()=>p()))}},c.map(((e,t)=>n.createElement(l,{piece:e,ref:i[t],key:e}))))};var m=e=>{let{location:t}=e;return n.createElement(c.A,null,n.createElement(f,{location:t}))}}}]);
//# sourceMappingURL=component---src-pages-index-jsx-4981dce961962d5b4d65.js.map