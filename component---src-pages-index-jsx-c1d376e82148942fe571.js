"use strict";(self.webpackChunkjstro_io=self.webpackChunkjstro_io||[]).push([[279],{825:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var n=r(5745),c=r(9216),s=r(8595),a=r(7611),o=r(4419),i=r(2945);var l=(0,n.forwardRef)(((e,t)=>{let{piece:r}=e;const c=function(e){const{0:t,1:r}=(0,n.useState)(!1);return(0,n.useEffect)((()=>{new IntersectionObserver((e=>{let[t]=e;return r(t.isIntersecting)}),{rootMargin:"-1px"}).observe(e.current)}),[e]),t}(t),s=`piece-${r}`;return n.createElement(o.A,{className:"Piece"},n.createElement(i.A,{className:"EmbedCard",ref:t,id:s},c&&n.createElement("iframe",{title:"p5.js Sketch",className:"Embed",src:`/sketches/${r}`})))}));const u=function(e){void 0===e&&(e=100);const{0:t,1:r}=(0,n.useState)(null);return n=>{t&&clearTimeout(t),r(setTimeout((()=>{r(null),n()}),e))}};var f=e=>{let{location:t}=e;const{0:c,1:o}=(0,n.useState)([]),{0:i,1:f}=(0,n.useState)([]);(0,n.useEffect)((()=>{(async()=>{const e=await r.e(748).then(r.t.bind(r,5748,19));o(Array.from(e)),f(Array.from(e).map((()=>(0,n.createRef)())))})()}),[]);const{0:m,1:d}=(0,n.useState)(null),E=()=>{const e=new IntersectionObserver((e=>{const t=e.find((e=>e.isIntersecting));t&&d(t.target.id.substring(6))}),{rootMargin:"-1px"});i.forEach((t=>{t.current&&e.observe(t.current)}))},p=u(100),v=u(200);(0,n.useEffect)((()=>{v((()=>{m&&(window.location.hash=`#${m}`)}))}),[m]);const b=e=>{var t;return null===(t=document.querySelector(`#piece-${e}`))||void 0===t?void 0:t.scrollIntoView()},h=t.hash.substring(1),w=u(400);(0,n.useEffect)((()=>{w((()=>{h&&h!==m&&b(h)}))}),[h,m]),(0,n.useEffect)((()=>{h?b(h):E()}),[]);const g=(0,s.A)();return n.createElement(a.A,{className:"Pieces",id:"pieces",style:{background:g.vars.palette.secondary.main},elevation:24,onScroll:()=>{p((()=>E()))}},c.map(((e,t)=>n.createElement(l,{piece:e,ref:i[t],key:e}))))};var m=e=>{let{location:t}=e;return n.createElement(c.A,null,n.createElement(f,{location:t}))}}}]);
//# sourceMappingURL=component---src-pages-index-jsx-c1d376e82148942fe571.js.map